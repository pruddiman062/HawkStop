var config=require("/lib/config"),regionWindow=Ti.UI.currentWindow,Draggable=require("ti.draggable"),location=regionWindow.locale,imageMap="";switch(location){case"Campus":imageMap=config.HS_ASSETS+"/images/Campus.jpg",regionid=2;break;case"Bay Point":imageMap=config.HS_ASSETS+"/images/Bay_Point.jpg",regionid=3;break;case"Bristol":imageMap=config.HS_ASSETS+"/images/map.jpg",regionid=1}var region={stops:[],container:null,init:function(){this.container=Draggable.createView({borderColor:"black",layout:"composite",height:1178,width:1302,top:0,left:0}),this.container.draggable.setConfig({minLeft:-1302+config.DISP_WIDTH,maxLeft:0,minTop:-1178+config.DISP_HEIGHT,maxTop:0}),this.container.add(this.buildMap()),this.addStops(regionid),regionWindow.add(this.container),regionWindow.add(this.buildControlBar())},buildMap:function(){var t=Ti.UI.createImageView({image:imageMap,height:"100%",width:"100%"});return t},buildControlBar:function(){var t=Ti.UI.createView({top:config.DISP_HEIGHT-config.DISP_HEIGHT/10-10,left:-2,height:config.DISP_HEIGHT/10,width:config.DISP_WIDTH+5,backgroundColor:"#000000",borderColor:"#FFFFFF",borderWidth:"2px"}),i=Ti.UI.createImageView({image:config.HS_ASSETS+"/images/close-icon.jpg",top:5,left:config.DISP_WIDTH-config.DISP_HEIGHT/10/2,height:config.DISP_HEIGHT/10/2,width:config.DISP_HEIGHT/10/2});return i.addEventListener("touchend",function(){Ti.UI.currentWindow.close()}),t.add(i),t},addStops:function(){var t=require("/lib/data"),e=new t,o=e.getStops(1);for(i=0;i<o.length;i++)if(""!=o[i].Long&&""!=o[i].Lat){var n=Ti.UI.createImageView({image:config.HS_ASSETS+"/images/stop.png",height:config.STOP_Y_SIZE,width:config.STOP_X_SIZE,top:o[i].Long-config.STOP_Y_SIZE/2,left:o[i].Lat-config.STOP_X_SIZE/2});this.container.add(n)}t=null,e=null,o=null},clean:function(){this.container=null,config=null,Draggable=null,regionWindow=null}};region.init();